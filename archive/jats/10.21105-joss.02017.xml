<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Publishing DTD v1.2 20190208//EN"
                  "JATS-publishing1.dtd">
<article xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink" dtd-version="1.2" article-type="other">
<front>
<journal-meta>
<journal-id></journal-id>
<journal-title-group>
<journal-title>Journal of Open Source Software</journal-title>
<abbrev-journal-title>JOSS</abbrev-journal-title>
</journal-title-group>
<issn publication-format="electronic">2475-9066</issn>
<publisher>
<publisher-name>Open Journals</publisher-name>
</publisher>
</journal-meta>
<article-meta>
<article-id pub-id-type="publisher-id">2017</article-id>
<article-id pub-id-type="doi">10.21105/joss.02017</article-id>
<title-group>
<article-title>ggalluvial: Layered Grammar for Alluvial
Plots</article-title>
</title-group>
<contrib-group>
<contrib contrib-type="author">
<contrib-id contrib-id-type="orcid">0000-0003-3126-9494</contrib-id>
<string-name>Jason Cory Brunson</string-name>
<xref ref-type="aff" rid="aff-1"/>
</contrib>
<aff id="aff-1">
<institution-wrap>
<institution>Center for Quantitative Medicine, UConn
Health</institution>
</institution-wrap>
</aff>
</contrib-group>
<pub-date date-type="pub" publication-format="electronic" iso-8601-date="2019-12-05">
<day>5</day>
<month>12</month>
<year>2019</year>
</pub-date>
<volume>5</volume>
<issue>49</issue>
<fpage>2017</fpage>
<permissions>
<copyright-statement>Authors of papers retain copyright and release the
work under a Creative Commons Attribution 4.0 International License (CC
BY 4.0)</copyright-statement>
<copyright-year>2021</copyright-year>
<copyright-holder>The article authors</copyright-holder>
<license license-type="open-access" xlink:href="https://creativecommons.org/licenses/by/4.0/">
<license-p>Authors of papers retain copyright and release the work under
a Creative Commons Attribution 4.0 International License (CC BY
4.0)</license-p>
</license>
</permissions>
<kwd-group kwd-group-type="author">
<kwd>ggplot2</kwd>
<kwd>alluvial plots</kwd>
<kwd>statistical graphics</kwd>
<kwd>data visualization</kwd>
<kwd>repeated measures data</kwd>
<kwd>categorical data</kwd>
</kwd-group>
</article-meta>
</front>
<body>
<sec id="summary">
  <title>Summary</title>
  <p>Alluvial diagrams use stacked bar plots and variable-width ribbons
  to represent multi-dimensional or repeated-measures data comprising
  categorical or ordinal variables
  (<xref alt="Bojanowski &amp; Edwards, 2016" rid="ref-Bojanowski2016" ref-type="bibr">Bojanowski
  &amp; Edwards, 2016</xref>;
  <xref alt="Rosvall &amp; Bergstrom, 2010" rid="ref-Rosvall2010" ref-type="bibr">Rosvall
  &amp; Bergstrom, 2010</xref>). The ggalluvial package extends the
  layered grammar of graphics of ggplot2
  (<xref alt="Wickham, 2016" rid="ref-Wickham2016" ref-type="bibr">Wickham,
  2016</xref>) to generate alluvial diagrams from tidy data
  (<xref alt="Wickham, 2014" rid="ref-Wickham2014" ref-type="bibr">Wickham,
  2014</xref>).</p>
  <p>The package makes two key contributions to the R ecosystem. First,
  ggalluvial anchors the imprecise notion of an alluvial diagram to the
  rigid grammar of graphics
  (<xref alt="Wilkinson, 2006" rid="ref-Wilkinson2006" ref-type="bibr">Wilkinson,
  2006</xref>), which lends the plots more precise meaning and opens up
  many combinatorial possibilities. Second, ggalluvial adopts a
  distinctive geological nomenclature to distinguish “alluvial plots”
  and their graphical elements from Sankey diagrams and parallel sets
  plots, which I hope prove useful as these visualization tools converge
  toward common standards.</p>
  <sec id="functionality">
    <title>Functionality</title>
    <p><ext-link ext-link-type="uri" xlink:href="http://corybrunson.github.io/ggalluvial/articles/ggalluvial.html">The
    primary vignette</ext-link> thoroughly describes and illustrates the
    functionality of ggalluvial, and the reader is encouraged to browse
    <ext-link ext-link-type="uri" xlink:href="http://corybrunson.github.io/ggalluvial/reference/index.html">the
    package documentation</ext-link> for comprehensive examples. In
    brief, the package contains stat and geom functions to add the
    following layers to a ggplot2 object:</p>
    <list list-type="bullet">
      <list-item>
        <p><italic>strata</italic>, or stacked bar plots, located in
        parallel along a (plotting) axis of (variable)
        <italic>axes</italic> or <italic>dimensions</italic></p>
      </list-item>
      <list-item>
        <p><italic>alluvia</italic>, ribbons through strata that connect
        the categories of individual cases or cohorts at different
        axes</p>
      </list-item>
      <list-item>
        <p><italic>lodes</italic>, subdivisions of strata by their
        intersections with alluvia</p>
      </list-item>
      <list-item>
        <p><italic>flows</italic>, segments of alluvia between
        strata</p>
      </list-item>
    </list>
    <p>Figure <xref alt="1" rid="figU003Aexample">1</xref> illustrates
    these and other plot elements by visualizing changes in several
    students’ curricula (based on their declared majors) across several
    academic terms. Each axis corresponds to an odd-valued term (1
    through 15), at which the students are grouped into strata according
    to their curricula—Art History, Ceramic, etc. The individual
    students can be tracked from term to term along their alluvia: for
    instance, one student started out in Digital Art, encoded by the
    blue ribbon, but had switched to Painting by the 11th term, where
    the ribbon turns pink. The partially transparent flows are colored
    according to their originating (not their terminating) terms, and
    the lodes where they intersect the strata are obscured by the
    solid-colored strata themselves. When a student’s curriculum is
    unknown, they are grouped into the “missing”
    (<monospace>NA</monospace>) stratum, which is weighted negatively in
    this example.</p>
    <fig>
      <caption><p><styled-content id="figU003Aexample"></styled-content>Alluvial
      plot of changes in curricula by a cohort of art
      students</p></caption>
      <graphic mimetype="image" mime-subtype="png" xlink:href="figure-1.png" xlink:title="" />
    </fig>
    <p>Plot layers are formed by pairing stats (statistical
    transformations) with geoms (mappings to graphical elements and
    properties); while every stat and geom has a conventional default,
    alternative grammatical pairings provide combinatorial richness to
    plotting possibilities. In the above example, the alluvium geom was
    paired with the flow stat, so that the flows of each alluvium could
    change color across the axes. Other meaningful stat–geom
    combinations can be found in the documentation, including pairings
    of the three alluvial stats (stratum, alluvium, and flow) with the
    text, errorbar, and pointrange geoms.</p>
    <p>Alluvial layers can interpret tidy data in either of two formats:
    long (one row per lode) and wide (one row per alluvium). These are
    related by the pivot operations of tidyr
    (<xref alt="Wickham et al., 2019" rid="ref-Wickham2019" ref-type="bibr">Wickham
    et al., 2019</xref>) and can be toggled between using the custom
    functions <monospace>to_lodes_form()</monospace> and
    <monospace>to_alluvia_form()</monospace>. The alluvial stats require
    custom aesthetics—either <monospace>stratum</monospace> and/or
    <monospace>alluvium</monospace> in combination with
    <monospace>x</monospace>, if the data are in long format, or some
    number of axis specifications (<monospace>axis1</monospace>,
    <monospace>axis2</monospace>, etc.), if the data are in wide
    format.<xref ref-type="fn" rid="fn1">1</xref> Because the alluvial
    geoms are specialized to these stats, no pairings with outside stats
    are currently supported.</p>
    <p>Most of the stat parameters control how the strata at each axis,
    and the lodes within each stratum, are ordered vertically. By
    default, these orderings are independent of differentiation
    aesthetics, so that layers are consistent within and across plots
    unless otherwise specified.
    <ext-link ext-link-type="uri" xlink:href="http://corybrunson.github.io/ggalluvial/articles/order-rectangles.html">An
    auxiliary vignette</ext-link> details the effects of these
    parameters. They can also be set as global options.</p>
  </sec>
  <sec id="concepts">
    <title>Concepts</title>
    <p>Visualizations of flow processes have long encoded magnitudes as
    ribbon widths, constituting a type called Sankey diagrams
    (<xref alt="Schmidt, 2008" rid="ref-Schmidt2008" ref-type="bibr">Schmidt,
    2008</xref>). A widely-used subtype for longitudinal categorical
    data represent categories as nodes threaded by edges that represent
    the trajectories and magnitudes of cases
    (<xref alt="Riehmann et al., 2005" rid="ref-Riehmann2005" ref-type="bibr">Riehmann
    et al., 2005</xref>). Their design anticipated parallel sets plots,
    which were adapted from parallel coordinates plots
    (<xref alt="Inselberg &amp; Dimsdale, 1987" rid="ref-Inselberg1987" ref-type="bibr">Inselberg
    &amp; Dimsdale, 1987</xref>;
    <xref alt="Wegman, 1990" rid="ref-Wegman1990" ref-type="bibr">Wegman,
    1990</xref>) to visualize multivariate categorical data, and which
    represent cohorts of equivalent cases as ribbons connecting
    categories represented as boxes
    (<xref alt="Kosara et al., 2006" rid="ref-Kosara2006" ref-type="bibr">Kosara
    et al., 2006</xref>). These in turn anticipated “alluvial diagrams”,
    proposed to visualize changes in case memberships across successive
    cross-sections
    (<xref alt="Rosvall &amp; Bergstrom, 2010" rid="ref-Rosvall2010" ref-type="bibr">Rosvall
    &amp; Bergstrom, 2010</xref>). Several R packages have been
    developed to generate diagrams of these types, including riverplot
    (<xref alt="Weiner, 2017" rid="ref-Weiner2017" ref-type="bibr">Weiner,
    2017</xref>), networkD3
    (<xref alt="Allaire et al., 2017" rid="ref-Allaire2017" ref-type="bibr">Allaire
    et al., 2017</xref>), sankey
    (<xref alt="Csárdi &amp; Weiner, 2017" rid="ref-Csardi2017" ref-type="bibr">Csárdi
    &amp; Weiner, 2017</xref>), alluvial
    (<xref alt="Bojanowski &amp; Edwards, 2016" rid="ref-Bojanowski2016" ref-type="bibr">Bojanowski
    &amp; Edwards, 2016</xref>), ggparallel
    (<xref alt="Hofmann &amp; Vendettuoli, 2013" rid="ref-Hofmann2013" ref-type="bibr">Hofmann
    &amp; Vendettuoli, 2013</xref>), ggforce
    (<xref alt="Pedersen, 2019" rid="ref-Pedersen2019" ref-type="bibr">Pedersen,
    2019</xref>), ggalluvial
    (<xref alt="Brunson, 2019" rid="ref-Brunson2019" ref-type="bibr">Brunson,
    2019</xref>), and ggpcp
    (<xref alt="Ge &amp; Hofmann, 2019" rid="ref-Ge2019" ref-type="bibr">Ge
    &amp; Hofmann, 2019</xref>).</p>
    <p>Sankey, parallel sets, and alluvial diagrams are often conflated,
    and there is currently no consensus on what features are distinctive
    to each type. Moreover, their graphical elements go by a variety of
    names, often interchangeably. In order to more clearly describe the
    features of ggalluvial in relation to similar packages, I have found
    it useful to adopt a careful demarcation among these diagram
    types.</p>
    <p><italic>Statistical graphics</italic> (here also simply called
    “plots”) are diagrams that communicate statistical information using
    graphical methods
    (<xref alt="Friendly, 2005" rid="ref-Friendly2005" ref-type="bibr">Friendly,
    2005</xref>) and, more narrowly, are uniquely determined from data
    by a fixed set of plotting rules
    (<xref alt="Wilkinson, 2006" rid="ref-Wilkinson2006" ref-type="bibr">Wilkinson,
    2006</xref>). By design, graphics produced by ggplot2 extensions are
    plots: The stat, geom, and other layers of a ggplot object exactly
    reproduce a graphic from data (under the same parameter
    settings).<xref ref-type="fn" rid="fn2">2</xref> Sankey diagrams are
    much more flexible. The earliest engine efficiency diagrams in this
    tradition could take a variety of forms to depict the same energy
    flow and were differently annotated for different audiences
    (<xref alt="Schmidt, 2008" rid="ref-Schmidt2008" ref-type="bibr">Schmidt,
    2008</xref>). Software implementations may use heuristic algorithms
    to position their graphical elements
    (<xref alt="Allaire et al., 2017" rid="ref-Allaire2017" ref-type="bibr">Allaire
    et al., 2017</xref>;
    <xref alt="Csárdi &amp; Weiner, 2017" rid="ref-Csardi2017" ref-type="bibr">Csárdi
    &amp; Weiner, 2017</xref>) or enable users to manually, even
    interactively, adjust them
    (<xref alt="Allaire et al., 2017" rid="ref-Allaire2017" ref-type="bibr">Allaire
    et al., 2017</xref>;
    <xref alt="Riehmann et al., 2005" rid="ref-Riehmann2005" ref-type="bibr">Riehmann
    et al., 2005</xref>;
    <xref alt="Weiner, 2017" rid="ref-Weiner2017" ref-type="bibr">Weiner,
    2017</xref>). Paradoxically, Sankey diagrams are overwhelmingly used
    to represent flow, whereas the aforecited ggplot2 extensions are
    used to visualize a wide variety of data types. Arguably, these
    extensions are better understood as producing a different type of
    diagram.</p>
    <p>Parallel sets plots might be viewed as a subtype of Sankey
    diagram with the following features: Ribbons proceed monotonically
    along one dimension, and every ribbon encounters a box at every
    axis. These graphical constraints correspond to combinatorial
    constraints on the data, which amount to an id–key–value structure
    in which every id–key pair takes exactly one value (possibly zero or
    missing, and optionally weighted). In this sense, the plots produced
    by the ggplot2 extensions (and by the alluvial package) are parallel
    sets plots: Cohorts are partitioned into categories at each axis and
    connected by ribbons whose widths encode their
    magnitudes.<xref ref-type="fn" rid="fn3">3</xref></p>
    <p>The plots produced still vary—in the shapes of ribbons, the
    arrangements of boxes, and the presence of gaps between boxes at the
    same axis. The exceptional geoms of ggparallel each offer
    common-angle as well as linear ribbons. Those of alluvial, ggforce,
    ggalluvial, and ggpcp offer one-parameter families that interpolate
    between straight and x-spline
    ribbons.<xref ref-type="fn" rid="fn4">4</xref> The stats vertically
    arrange the elements (boxes and ribbons) at each axis. These
    distinct elements are rendered by separate layers in ggforce,
    ggalluvial, and ggpcp, following the additive
    (<monospace>+</monospace>) syntax of ggplot2. ggalluvial provides
    more levers of control over the statistical transformations, thereby
    over the messages conveyed by the plot, than the other
    packages.<xref ref-type="fn" rid="fn5">5</xref></p>
    <p>The ggalluvial package adopts the term <italic>alluvial
    plot</italic> for the subtype of parallel sets plots it produces,
    with the geological terminology introduced
    above.<xref ref-type="fn" rid="fn6">6</xref> These alluvial plots
    are distinguished by two features: a prescribed order on the stacked
    elements at each axis, including both the values of the discrete
    variables and the ribbons connecting cases or cohorts between them;
    and a real-valued plotting dimension perpendicular to that of flow,
    along which these elements are stacked, so that gaps between them
    are precluded. In combination, these features confer greater meaning
    on the second plotting dimension.</p>
    <p>The first feature is shared by the other packages but is not
    essential to parallel sets plots; such plots could, for example,
    arrange boxes corresponding to repeated categorical decompositions
    differently at different axes. While most of the packages separate
    boxes at each axis with gaps, these can be reduced to zero, so that
    each package can create alluvial plots. (ggparallel and ggalluvial
    alone <italic>only</italic> produce alluvial plots.) These features
    are particularly important to some applications and, in my view, can
    fundamentally change the way a plot is interpreted. It is for this
    reason that I believe the new typology and terminology are
    warranted.</p>
  </sec>
  <sec id="applications">
    <title>Applications</title>
    <p>While most uses might be served equally well by other parallel
    sets plots or Sankey diagrams, alluvial plots seem exceptionally
    well-suited to three settings: repeated ordinal measures data,
    incomplete longitudinal data, and signed categorical
    data.<xref ref-type="fn" rid="fn7">7</xref></p>
    <p><bold>Repeated ordinal measures data.</bold> Most Sankey,
    parallel sets, and alluvial implementations stack each bar plot in
    order of name or of size (though some follow user-provided
    hierarchies), and most insert gaps between categories for easy
    visual discrimination. Ordinal variables are most appropriately
    stacked in their own intrinsic and consistent order and, when the
    number of categories (hence of gaps) changes from axis to axis,
    vertical separations can obscure whether magnitude totals changed as
    well. A use case by Schlotter et al.
    (<xref alt="2019" rid="ref-Schlotter2019" ref-type="bibr">2019</xref>),
    to represent patients’ physical limitations following an
    investigational right heart valve repair technique, illustrates the
    use of an ordinal stratum variable (a heart failure functional
    classification). Another, by North et al.
    (<xref alt="2019" rid="ref-North2019" ref-type="bibr">2019</xref>),
    to represent ranked preferences among several definitions of
    veganism by survey respondents, illustrates the importance of
    consistency in their order. In both cases, the fixed heights of the
    bar plots conveyed that no individuals were lost to follow-up.</p>
    <p><bold>Incomplete longitudinal data.</bold> Alluvial plots clearly
    indicate times at which longitudinal data are censored or otherwise
    missing: Certain strata, or the alluvia or flows connecting them,
    are present at one time point but absent at a previous or future
    one. Seekatz et al.
    (<xref alt="2018" rid="ref-Seekatz2018" ref-type="bibr">2018</xref>)
    use this feature to include in one alluvial plot a sample of
    <italic>Clostridium difficile</italic>–infected patients who had
    their infections ribotyped at multiple times. Patients were
    classified by dominant ribotype, and the alluvial plot showcased
    variability in this classification. While all 32 patients had at
    least two samples taken, only 3 had four, communicated by the
    shortening of the bar plots along the main dimension. Sjoding et al.
    (<xref alt="2019" rid="ref-Sjoding2019" ref-type="bibr">2019</xref>)
    use a similar plot to trace patient groups receiving mechanical
    ventilation based on discretized tidal volumes, including a grey
    stratum for patients discontinued from intubation.</p>
    <p><bold>Signed categorical data.</bold> Edwards &amp; Pinkerton
    (<xref alt="2019" rid="ref-Edwards2019" ref-type="bibr">2019</xref>)
    produced a novel alluvial plot to represent changes in ownership
    category of owners in a halibut fishery. The total number of owners
    changed from year to year as exiters were not exactly matched by new
    entrants. In order to depict an accurate total but include both new
    entrants and exiters at each year, the authors affixed a negative
    stratum for the exiter category to each bar
    plot.<xref ref-type="fn" rid="fn8">8</xref> Such a feature has no
    analogue in Sankey diagrams or parallel sets plots but potentially
    wide-ranging applications: Bar plots may use “positive” and
    “negative” bars to represent signed categories, such as contributors
    to revenue versus deficit, or to contrast the bars divided along a
    binary variable such as gender across age groups in a population
    (“pyramid plots”). Alluvial plots provide a way to track cases and
    cohorts across such graphics, even when cases change sign. Future
    applications may demonstrate additional uses for this
    functionality.</p>
  </sec>
</sec>
<sec id="acknowledgments">
  <title>Acknowledgments</title>
  <p>I am grateful to many users for their feedback on every version of
  this package. Development benefitted from the use of resources and
  support of colleagues at UConn Health, and I have been supported in
  part by T90 training grant 5T90DE021989-07 from the National Institute
  of Dental and Craniofacial Research.</p>
</sec>
</body>
<back>
<ref-list>
  <ref-list>
    <ref id="ref-Inselberg1987">
      <element-citation publication-type="chapter">
        <person-group person-group-type="author">
          <name><surname>Inselberg</surname><given-names>Alfred</given-names></name>
          <name><surname>Dimsdale</surname><given-names>Bernard</given-names></name>
        </person-group>
        <article-title>Parallel Coordinates for Visualizing Multi-Dimensional Geometry</article-title>
        <source>Computer graphics 1987</source>
        <publisher-name>Springer Japan</publisher-name>
        <publisher-loc>Tokyo</publisher-loc>
        <year iso-8601-date="1987">1987</year>
        <uri>http://link.springer.com/10.1007/978-4-431-68057-4{\_}3</uri>
        <pub-id pub-id-type="doi">10.1007/978-4-431-68057-4_3</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Wegman1990">
      <element-citation publication-type="article-journal">
        <person-group person-group-type="author">
          <name><surname>Wegman</surname><given-names>Edward J.</given-names></name>
        </person-group>
        <article-title>Hyperdimensional Data Analysis Using Parallel Coordinates</article-title>
        <source>Journal of the American Statistical Association</source>
        <year iso-8601-date="1990-09">1990</year><month>09</month>
        <volume>85</volume>
        <issue>411</issue>
        <issn>0162-1459</issn>
        <uri>http://www.tandfonline.com/doi/abs/10.1080/01621459.1990.10474926</uri>
        <pub-id pub-id-type="doi">10.1080/01621459.1990.10474926</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Riehmann2005">
      <element-citation publication-type="paper-conference">
        <person-group person-group-type="author">
          <name><surname>Riehmann</surname><given-names>P.</given-names></name>
          <name><surname>Hanfler</surname><given-names>M.</given-names></name>
          <name><surname>Froehlich</surname><given-names>B.</given-names></name>
        </person-group>
        <article-title>Interactive Sankey diagrams</article-title>
        <source>IEEE symposium on information visualization, 2005. INFOVIS 2005.</source>
        <publisher-name>IEEE</publisher-name>
        <year iso-8601-date="2005">2005</year>
        <isbn>0-7803-9464-X</isbn>
        <uri>http://ieeexplore.ieee.org/document/1532152/</uri>
        <pub-id pub-id-type="doi">10.1109/INFVIS.2005.1532152</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Friendly2005">
      <element-citation publication-type="chapter">
        <person-group person-group-type="author">
          <name><surname>Friendly</surname><given-names>Michael</given-names></name>
        </person-group>
        <article-title>Milestones in the History of Data Visualization: A Case Study in Statistical Historiography</article-title>
        <source>Classification — the ubiquitous challenge. Studies in classification, data analysis, and knowledge organization</source>
        <publisher-name>Springer-Verlag</publisher-name>
        <publisher-loc>Berlin/Heidelberg</publisher-loc>
        <year iso-8601-date="2005">2005</year>
        <uri>http://www.math.usu.edu/{~}symanzik/teaching/2009{\_}stat6560/Downloads/Friendly{\_}milestone.pdf</uri>
        <pub-id pub-id-type="doi">10.1007/3-540-28084-7_4</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Wilkinson2006">
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name><surname>Wilkinson</surname><given-names>Leland</given-names></name>
        </person-group>
        <source>The Grammar of Graphics</source>
        <publisher-name>Springer Science &amp; Business Media</publisher-name>
        <year iso-8601-date="2006">2006</year>
        <isbn>0387286950</isbn>
        <uri>https://books.google.com/books?id=NRyGnjeNKJIC</uri>
        <pub-id pub-id-type="doi">10.1007/0-387-28695-0</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Slowikowski2019">
      <element-citation>
        <person-group person-group-type="author">
          <name><surname>Slowikowski</surname><given-names>Kamil</given-names></name>
        </person-group>
        <article-title>ggrepel: Automatically Position Non-Overlapping Text Labels with ’ggplot2’</article-title>
        <year iso-8601-date="2019">2019</year>
      </element-citation>
    </ref>
    <ref id="ref-Kosara2006">
      <element-citation publication-type="paper-conference">
        <person-group person-group-type="author">
          <name><surname>Kosara</surname><given-names>Robert</given-names></name>
          <name><surname>Bendix</surname><given-names>Fabian</given-names></name>
          <name><surname>Hauser</surname><given-names>Helwig</given-names></name>
        </person-group>
        <article-title>Parallel sets: Interactive exploration and visual analysis of categorical data</article-title>
        <source>IEEE transactions on visualization and computer graphics</source>
        <year iso-8601-date="2006-07">2006</year><month>07</month>
        <volume>12</volume>
        <issn>10772626</issn>
        <uri>https://ieeexplore.ieee.org/abstract/document/1634321</uri>
        <pub-id pub-id-type="doi">10.1109/TVCG.2006.76</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Schmidt2008">
      <element-citation publication-type="article-journal">
        <person-group person-group-type="author">
          <name><surname>Schmidt</surname><given-names>Mario</given-names></name>
        </person-group>
        <article-title>The Sankey Diagram in Energy and Material Flow Management</article-title>
        <source>Journal of Industrial Ecology</source>
        <publisher-name>John Wiley &amp; Sons, Ltd (10.1111)</publisher-name>
        <year iso-8601-date="2008-02">2008</year><month>02</month>
        <volume>12</volume>
        <issue>1</issue>
        <issn>10881980</issn>
        <uri>http://doi.wiley.com/10.1111/j.1530-9290.2008.00004.x</uri>
        <pub-id pub-id-type="doi">10.1111/j.1530-9290.2008.00004.x</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Rosvall2010">
      <element-citation publication-type="article-journal">
        <person-group person-group-type="author">
          <name><surname>Rosvall</surname><given-names>Martin</given-names></name>
          <name><surname>Bergstrom</surname><given-names>Carl T.</given-names></name>
        </person-group>
        <article-title>Mapping Change in Large Networks</article-title>
        <source>PLoS ONE</source>
        <person-group person-group-type="editor">
          <name><surname>Rapallo</surname><given-names>Fabio</given-names></name>
        </person-group>
        <year iso-8601-date="2010-01">2010</year><month>01</month>
        <volume>5</volume>
        <issue>1</issue>
        <issn>1932-6203</issn>
        <uri>http://dx.plos.org/10.1371/journal.pone.0008694</uri>
        <pub-id pub-id-type="doi">10.1371/journal.pone.0008694</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Hofmann2013">
      <element-citation publication-type="article-journal">
        <person-group person-group-type="author">
          <name><surname>Hofmann</surname><given-names>Heike</given-names></name>
          <name><surname>Vendettuoli</surname><given-names>Marie</given-names></name>
        </person-group>
        <article-title>Common angle plots as perception-true visualizations of categorical associations</article-title>
        <source>IEEE Transactions on Visualization and Computer Graphics</source>
        <year iso-8601-date="2013">2013</year>
        <volume>19</volume>
        <issue>12</issue>
        <issn>10772626</issn>
        <uri>https://ieeexplore.ieee.org/abstract/document/6634157</uri>
        <pub-id pub-id-type="doi">10.1109/TVCG.2013.140</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Wickham2014">
      <element-citation publication-type="article-journal">
        <person-group person-group-type="author">
          <name><surname>Wickham</surname><given-names>Hadley</given-names></name>
        </person-group>
        <article-title>Tidy Data</article-title>
        <source>Journal of Statistical Software</source>
        <year iso-8601-date="2014-09">2014</year><month>09</month>
        <volume>59</volume>
        <issue>10</issue>
        <issn>1548-7660</issn>
        <uri>http://www.jstatsoft.org/v59/i10/</uri>
        <pub-id pub-id-type="doi">10.18637/jss.v059.i10</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Wickham2016">
      <element-citation publication-type="book">
        <person-group person-group-type="author">
          <name><surname>Wickham</surname><given-names>Hadley</given-names></name>
        </person-group>
        <source>ggplot2: Elegant Graphics for Data Analysis</source>
        <publisher-name>Springer-Verlag</publisher-name>
        <publisher-loc>New York</publisher-loc>
        <year iso-8601-date="2016">2016</year>
        <isbn>978-3-319-24277-4</isbn>
        <uri>https://ggplot2.tidyverse.org</uri>
        <pub-id pub-id-type="doi">10.1007/978-0-387-98141-3</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Bojanowski2016">
      <element-citation>
        <person-group person-group-type="author">
          <name><surname>Bojanowski</surname><given-names>Michał</given-names></name>
          <name><surname>Edwards</surname><given-names>Robin</given-names></name>
        </person-group>
        <article-title>alluvial: R Package for Creating Alluvial Diagrams</article-title>
        <year iso-8601-date="2016">2016</year>
        <uri>https://cran.r-project.org/package=alluvial</uri>
      </element-citation>
    </ref>
    <ref id="ref-Allaire2017">
      <element-citation>
        <person-group person-group-type="author">
          <name><surname>Allaire</surname><given-names>J. J.</given-names></name>
          <name><surname>Gandrud</surname><given-names>Christopher</given-names></name>
          <name><surname>Russell</surname><given-names>Kenton</given-names></name>
          <name><surname>Yetman</surname><given-names>C. J.</given-names></name>
        </person-group>
        <article-title>networkD3: D3 JavaScript Network Graphs from R</article-title>
        <year iso-8601-date="2017">2017</year>
        <uri>https://cran.r-project.org/package=networkD3</uri>
      </element-citation>
    </ref>
    <ref id="ref-Csardi2017">
      <element-citation>
        <person-group person-group-type="author">
          <name><surname>Csárdi</surname><given-names>Gábor</given-names></name>
          <name><surname>Weiner</surname><given-names>January</given-names></name>
        </person-group>
        <article-title>sankey: Illustrate the Flow of Information or Material</article-title>
        <year iso-8601-date="2017">2017</year>
        <uri>https://cran.r-project.org/package=sankey</uri>
      </element-citation>
    </ref>
    <ref id="ref-Weiner2017">
      <element-citation>
        <person-group person-group-type="author">
          <name><surname>Weiner</surname><given-names>January</given-names></name>
        </person-group>
        <article-title>riverplot: Sankey or Ribbon Plots</article-title>
        <year iso-8601-date="2017">2017</year>
        <uri>https://cran.r-project.org/package=riverplot</uri>
      </element-citation>
    </ref>
    <ref id="ref-Seekatz2018">
      <element-citation publication-type="article-journal">
        <person-group person-group-type="author">
          <name><surname>Seekatz</surname><given-names>Anna M.</given-names></name>
          <name><surname>Wolfrum</surname><given-names>Emily</given-names></name>
          <name><surname>DeWald</surname><given-names>Christopher M.</given-names></name>
          <name><surname>Putler</surname><given-names>Rosemary K. B.</given-names></name>
          <name><surname>Vendrov</surname><given-names>Kimberly C.</given-names></name>
          <name><surname>Rao</surname><given-names>Krishna</given-names></name>
          <name><surname>Young</surname><given-names>Vincent B.</given-names></name>
        </person-group>
        <article-title>Presence of multiple Clostridium difficile strains at primary infection is associated with development of recurrent disease</article-title>
        <source>Anaerobe</source>
        <publisher-name>Academic Press</publisher-name>
        <year iso-8601-date="2018-10">2018</year><month>10</month>
        <volume>53</volume>
        <issn>10958274</issn>
        <uri>https://www.sciencedirect.com/science/article/pii/S1075996418301021</uri>
        <pub-id pub-id-type="doi">10.1016/j.anaerobe.2018.05.017</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Koneswarakantha2019">
      <element-citation>
        <person-group person-group-type="author">
          <name><surname>Koneswarakantha</surname><given-names>Bjoern</given-names></name>
        </person-group>
        <article-title>easyalluvial: Generate Alluvial Plots with a Single Line of Code</article-title>
        <year iso-8601-date="2019">2019</year>
        <uri>https://cran.r-project.org/package=easyalluvial</uri>
      </element-citation>
    </ref>
    <ref id="ref-Wickham2019">
      <element-citation publication-type="article-journal">
        <person-group person-group-type="author">
          <name><surname>Wickham</surname><given-names>Hadley</given-names></name>
          <name><surname>Averick</surname><given-names>Mara</given-names></name>
          <name><surname>Bryan</surname><given-names>Jennifer</given-names></name>
          <name><surname>Chang</surname><given-names>Winston</given-names></name>
          <name><surname>D’Agostino</surname><given-names>Lucy McGowan</given-names></name>
          <name><surname>François</surname><given-names>Romain</given-names></name>
          <name><surname>Grolemund</surname><given-names>Garrett</given-names></name>
          <name><surname>Hayes</surname><given-names>Alex</given-names></name>
          <name><surname>Henry</surname><given-names>Lionel</given-names></name>
          <name><surname>Hester</surname><given-names>Jim</given-names></name>
          <name><surname>Kuhn</surname><given-names>Max</given-names></name>
          <name><surname>Pedersen</surname><given-names>Thomas Lin</given-names></name>
          <name><surname>Miller</surname><given-names>Evan</given-names></name>
          <name><surname>Bache</surname><given-names>Stephan Milton</given-names></name>
          <name><surname>Müller</surname><given-names>Kirill</given-names></name>
          <name><surname>Ooms</surname><given-names>Jeroen</given-names></name>
          <name><surname>Robinson</surname><given-names>David</given-names></name>
          <name><surname>Seidel</surname><given-names>Dana Paige</given-names></name>
          <name><surname>Spinu</surname><given-names>Vitalie</given-names></name>
          <name><surname>Takahashi</surname><given-names>Kohske</given-names></name>
          <name><surname>Vaughan</surname><given-names>Davis</given-names></name>
          <name><surname>Wilke</surname><given-names>Claus</given-names></name>
          <name><surname>Woo</surname><given-names>Kara</given-names></name>
          <name><surname>Yutani</surname><given-names>Hiroaki</given-names></name>
        </person-group>
        <article-title>Welcome to the Tidyverse</article-title>
        <source>Journal of Open Source Software</source>
        <year iso-8601-date="2019">2019</year>
        <volume>4</volume>
        <issue>43</issue>
        <uri>https://joss.theoj.org/papers/10.21105/joss.01686</uri>
        <pub-id pub-id-type="doi">10.21105/joss.01686</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Pedersen2019">
      <element-citation>
        <person-group person-group-type="author">
          <name><surname>Pedersen</surname><given-names>Thomas Lin</given-names></name>
        </person-group>
        <article-title>ggforce: Accelerating ’ggplot2’</article-title>
        <year iso-8601-date="2019">2019</year>
        <uri>https://cran.r-project.org/package=ggforce</uri>
      </element-citation>
    </ref>
    <ref id="ref-Ge2019">
      <element-citation>
        <person-group person-group-type="author">
          <name><surname>Ge</surname><given-names>Yawei</given-names></name>
          <name><surname>Hofmann</surname><given-names>Heike</given-names></name>
        </person-group>
        <article-title>ggpcp: Parallel Coordinate Plots in the ggplot2 Framework</article-title>
        <year iso-8601-date="2019">2019</year>
        <uri>https://yaweige.github.io/ggpcp/</uri>
      </element-citation>
    </ref>
    <ref id="ref-Brunson2019">
      <element-citation>
        <person-group person-group-type="author">
          <name><surname>Brunson</surname><given-names>Jason Cory</given-names></name>
        </person-group>
        <article-title>ggalluvial: Alluvial Plots in ’ggplot2’</article-title>
        <year iso-8601-date="2019">2019</year>
        <uri>https://cran.r-project.org/package=ggalluvial</uri>
      </element-citation>
    </ref>
    <ref id="ref-North2019">
      <element-citation publication-type="manuscript">
        <person-group person-group-type="author">
          <name><surname>North</surname><given-names>Madelon</given-names></name>
          <name><surname>Kothe</surname><given-names>Emily</given-names></name>
          <name><surname>Klas</surname><given-names>Anna</given-names></name>
          <name><surname>Ling</surname><given-names>Mathew</given-names></name>
        </person-group>
        <article-title>It’s not just a diet, it’s a lifestyle: An Exploratory Study into Community Preferences of Vegan Definitions</article-title>
        <publisher-name>PsyArXiv</publisher-name>
        <year iso-8601-date="2019">2019</year>
        <uri>https://psyarxiv.com/mkqn4</uri>
        <pub-id pub-id-type="doi">10.31234/OSF.IO/MKQN4</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Schlotter2019">
      <element-citation publication-type="article-journal">
        <person-group person-group-type="author">
          <name><surname>Schlotter</surname><given-names>Florian</given-names></name>
          <name><surname>Orban</surname><given-names>Mathias</given-names></name>
          <name><surname>Rommel</surname><given-names>Karl‐Philipp</given-names></name>
          <name><surname>Besler</surname><given-names>Christian</given-names></name>
          <name><surname>Roeder</surname><given-names>Maximilian</given-names></name>
          <name><surname>Braun</surname><given-names>Daniel</given-names></name>
          <name><surname>Unterhuber</surname><given-names>Matthias</given-names></name>
          <name><surname>Borger</surname><given-names>Michael</given-names></name>
          <name><surname>Hagl</surname><given-names>Christian</given-names></name>
          <name><surname>Orban</surname><given-names>Martin</given-names></name>
          <name><surname>Nabauer</surname><given-names>Michael</given-names></name>
          <name><surname>Massberg</surname><given-names>Steffen</given-names></name>
          <name><surname>Thiele</surname><given-names>Holger</given-names></name>
          <name><surname>Hausleiter</surname><given-names>Jörg</given-names></name>
          <name><surname>Lurz</surname><given-names>Philipp</given-names></name>
        </person-group>
        <article-title>Aetiology‐based clinical scenarios predict outcomes of transcatheter edge‐to‐edge tricuspid valve repair of functional tricuspid regurgitation</article-title>
        <source>European Journal of Heart Failure</source>
        <publisher-name>John Wiley &amp; Sons, Ltd</publisher-name>
        <year iso-8601-date="2019-09">2019</year><month>09</month>
        <volume>21</volume>
        <issue>9</issue>
        <issn>1388-9842</issn>
        <uri>https://onlinelibrary.wiley.com/doi/abs/10.1002/ejhf.1547</uri>
        <pub-id pub-id-type="doi">10.1002/ejhf.1547</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Sjoding2019">
      <element-citation publication-type="article-journal">
        <person-group person-group-type="author">
          <name><surname>Sjoding</surname><given-names>Michael W.</given-names></name>
          <name><surname>Gong</surname><given-names>Michelle N.</given-names></name>
          <name><surname>Haas</surname><given-names>Carl F.</given-names></name>
          <name><surname>Iwashyna</surname><given-names>Theodore J.</given-names></name>
        </person-group>
        <article-title>Evaluating Delivery of Low Tidal Volume Ventilation in Six ICUs Using Electronic Health Record Data</article-title>
        <source>Critical Care Medicine</source>
        <year iso-8601-date="2019-01">2019</year><month>01</month>
        <volume>47</volume>
        <issue>1</issue>
        <issn>0090-3493</issn>
        <uri>http://insights.ovid.com/crossref?an=00003246-201901000-00008 https://journals.lww.com/ccmjournal/Fulltext/2019/01000/Evaluating{\_}Delivery{\_}of{\_}Low{\_}Tidal{\_}Volume.8.aspx</uri>
        <pub-id pub-id-type="doi">10.1097/CCM.0000000000003469</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Edwards2019">
      <element-citation publication-type="article-journal">
        <person-group person-group-type="author">
          <name><surname>Edwards</surname><given-names>Danielle N.</given-names></name>
          <name><surname>Pinkerton</surname><given-names>Evelyn</given-names></name>
        </person-group>
        <article-title>Rise of the investor class in the British Columbia Pacific halibut fishery</article-title>
        <source>Marine Policy</source>
        <publisher-name>Elsevier Ltd</publisher-name>
        <year iso-8601-date="2019-11">2019</year><month>11</month>
        <volume>109</volume>
        <issn>0308597X</issn>
        <uri>https://www.sciencedirect.com/science/article/pii/S0308597X19302696</uri>
        <pub-id pub-id-type="doi">10.1016/j.marpol.2019.103676</pub-id>
      </element-citation>
    </ref>
    <ref id="ref-Shaffer2019">
      <element-citation>
        <person-group person-group-type="author">
          <name><surname>Shaffer</surname><given-names>Jeffrey</given-names></name>
        </person-group>
        <article-title>Sankey diagrams: Why i used the sigmoid function and why you probably shouldn’t</article-title>
        <publisher-name>https://www.dataplusscience.com/Sigmoid.html</publisher-name>
        <year iso-8601-date="2019-05-13">2019</year><month>05</month><day>13</day>
      </element-citation>
    </ref>
  </ref-list>
</ref-list>
<fn-group>
  <fn id="fn1">
    <label>1</label><p>Because these aesthetics are not recognized by
    ggplot2, they produce warnings under some conditions.</p>
  </fn>
  <fn id="fn2">
    <label>2</label><p>There are exceptions. For example, the jitter
    geom in ggplot2 introduces randomness to symbol positions, and the
    repel geoms of ggrepel
    (<xref alt="Slowikowski, 2019" rid="ref-Slowikowski2019" ref-type="bibr">Slowikowski,
    2019</xref>) use heuristic algorithms to position text.</p>
  </fn>
  <fn id="fn3">
    <label>3</label><p>The possible exceptions are the hammock plots and
    common angle plots of ggparallel, which are contrasted with a
    stricter definition of parallel sets plots than I use here, in which
    ribbons are straight, their widths aggregate to box widths, and they
    meet without overlap at the sides of boxes, partitioning them
    (<xref alt="Hofmann &amp; Vendettuoli, 2013" rid="ref-Hofmann2013" ref-type="bibr">Hofmann
    &amp; Vendettuoli, 2013</xref>).</p>
  </fn>
  <fn id="fn4">
    <label>4</label><p>Several alternative curves, based on Shaffer
    (<xref alt="2019" rid="ref-Shaffer2019" ref-type="bibr">2019</xref>),
    are in development.</p>
  </fn>
  <fn id="fn5">
    <label>5</label><p>Indeed, the dependency package easyalluvial
    (<xref alt="Koneswarakantha, 2019" rid="ref-Koneswarakantha2019" ref-type="bibr">Koneswarakantha,
    2019</xref>) was built on top of ggalluvial to exchange much of this
    flexibility for more expedient data exploration.</p>
  </fn>
  <fn id="fn6">
    <label>6</label><p>This has the unfortunate side effect of
    conflating search results from the geology literature.</p>
  </fn>
  <fn id="fn7">
    <label>7</label><p>To be sure, this is a subjective assessment that
    may be refuted by visualization effectiveness research.</p>
  </fn>
  <fn id="fn8">
    <label>8</label><p>The authors should be credited with this
    innovation, which I only implemented in ggalluvial after learning
    about their workaround to create it using a previous version.</p>
  </fn>
</fn-group>
</back>
</article>
